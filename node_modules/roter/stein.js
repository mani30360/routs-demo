const fileManager = require("fs");
const pluginManager = {};

pluginManager.load = function(folderPath) {
  const plugins = {};
  fileManager.readdirSync(folderPath, {withFileTypes:true}).forEach(function(folder) {
    if(!folder.name.isDirectory()) return;
    const pluginInfo = require(`${folderPath}/${folder.name}/information.json`);
    const plugin = require(`${folderPath}/${folder.name}/${pluginInfo.main}`);
    plugins[plugin.callName.replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"\s]/g, "_")] = plugin.execute;
  });

    return plugins;
}



module.exports = {
  pluginManager: pluginManager
};